{"openapi":"3.1.0","info":{"title":"insureai","version":"0.1.0"},"paths":{"/v1/register":{"post":{"tags":["Authentication"],"summary":"Register","description":"Register a new user account.\n\nArgs:\n- req: UserRegisterRequest object containing the user's registration details.\n- user_service: Instance of UserService for user-related operations.\n- organization_service: Instance of OrganizationService for organization-related operations.\n\nReturns:\n- Token: Access token for the registered user.","operationId":"Authentication-register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/login":{"post":{"tags":["Authentication"],"summary":"Login","description":"Authenticates a user and generates an access token.\n\nArgs:\n    req (UserLoginRequest): The user login request object containing email and password.\n    user_service (UserService): The user service instance.\n    organization_service (OrganizationService): The organization service instance.\n\nReturns:\n    Token: The access token object containing the generated access token and token type.","operationId":"Authentication-login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/me":{"get":{"tags":["Authentication"],"summary":"Get Me","operationId":"Authentication-get_me","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/branches":{"post":{"tags":["Organizations"],"summary":"Create Branch","description":"Create a new branch for an organization.\n\nArgs:\n    req (CreateBranchRequest): The request object containing branch details.\n    user_ctx (UserContext): The user context object.\n    organization_service (OrganizationService): The organization service.\n\nReturns:\n    Branch: The response object containing the created branch details.","operationId":"Organizations-create_branch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBranchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/branches/{branch_id}/members":{"get":{"tags":["Organizations"],"summary":"Get Branch Members","description":"Get the members of a branch.\n\nArgs:\n    branch_id (str): The ID of the branch.\n    user_ctx (UserContextDep): The user context dependency.\n    organization_service (OrganizationServiceDep): The organization service dependency.\n\nReturns:\n    list[User]: A list of users who are members of the branch.","operationId":"Organizations-get_branch_members","security":[{"HTTPBearer":[]}],"parameters":[{"name":"branch_id","in":"path","required":true,"schema":{"type":"string","title":"Branch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"},"title":"Response Organizations-Get Branch Members"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/branches/{branch_id}/invites":{"get":{"tags":["Organizations"],"summary":"Get Branch Invites","description":"Get the invites for a branch.\n\nArgs:\n    branch_id (str): The ID of the branch.\n    user_ctx (UserContextDep): The user context dependency.\n    organization_service (OrganizationServiceDep): The organization service dependency.\n\nReturns:\n    list[Invite]: A list of invites for the branch.","operationId":"Organizations-get_branch_invites","security":[{"HTTPBearer":[]}],"parameters":[{"name":"branch_id","in":"path","required":true,"schema":{"type":"string","title":"Branch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Invite"},"title":"Response Organizations-Get Branch Invites"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Organizations"],"summary":"Create Branch Invite","description":"Create an invite for a branch.\n\nArgs:\n    branch_id (str): The ID of the branch.\n    user_ctx (UserContextDep): The user context dependency.\n    organization_service (OrganizationServiceDep): The organization service dependency.\n\nReturns:\n    Invite: The created invite.","operationId":"Organizations-create_branch_invite","security":[{"HTTPBearer":[]}],"parameters":[{"name":"branch_id","in":"path","required":true,"schema":{"type":"string","title":"Branch Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBranchInviteRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Invite"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/branches/{branch_id}/members/{member_id}/access":{"post":{"tags":["Organizations"],"summary":"Modify Member Access","operationId":"Organizations-modify_member_access","security":[{"HTTPBearer":[]}],"parameters":[{"name":"branch_id","in":"path","required":true,"schema":{"type":"string","title":"Branch Id"}},{"name":"member_id","in":"path","required":true,"schema":{"type":"string","title":"Member Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifyMemberAccessRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/leads":{"post":{"tags":["Leads"],"summary":"Create Lead","description":"Create a new lead and associated profile.\n\nArgs:\n    req (CreateLeadRequest): The request object containing lead information.\n    user_ctx (UserContextDep): The user context dependency.\n    lead_service (LeadServiceDep): The lead service dependency.\n    agent_service (AgentServiceDep): The agent service dependency.\n    retell_service (RetellAIServiceDep): The retell AI service dependency.\n\nReturns:\n    LeadResponse: The response object containing the created lead and profile.","operationId":"Leads-create_lead","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateLeadRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Leads"],"summary":"Get Leads","description":"Retrieve leads for a specific branch.\n\nArgs:\n    branch_id (str): The ID of the branch.\n    user_ctx (UserContextDep): The user context dependency.\n    lead_service (LeadServiceDep): The lead service dependency.\n\nReturns:\n    List[LeadResponse]: A list of LeadResponse objects representing the leads for the branch.","operationId":"Leads-get_leads","security":[{"HTTPBearer":[]}],"parameters":[{"name":"branch_id","in":"query","required":true,"schema":{"type":"string","title":"Branch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/leads/{lead_id}":{"post":{"tags":["Leads"],"summary":"Update Lead","description":"Update a lead and its associated profile.\n\nArgs:\n    lead_id (str): The ID of the lead to update.\n    req (UpdateLeadRequest): The request object containing the updated lead and profile data.\n    user_ctx (UserContextDep): The user context dependency.\n    lead_service (LeadServiceDep): The lead service dependency.\n\nReturns:\n    dict: A dictionary containing the updated lead and profile.\n\nRaises:\n    CustomException: If the lead is not found.","operationId":"Leads-update_lead","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateLeadRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Leads"],"summary":"Get Lead","description":"Retrieve a lead by its ID.\n\nArgs:\n    lead_id (str): The ID of the lead to retrieve.\n    user_ctx (UserContextDep): The user context dependency.\n    lead_service (LeadServiceDep): The lead service dependency.\n\nReturns:\n    LeadResponse: The response object containing the lead.\n\nRaises:\n    CustomException: If the lead is not found.","operationId":"Leads-get_lead","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Leads"],"summary":"Delete Lead","description":"Delete a lead by its ID.\n\nArgs:\n    lead_id (str): The ID of the lead to delete.\n    user_ctx (UserContextDep): The user context dependency.\n    lead_service (LeadServiceDep): The lead service dependency.\n\nReturns:\n    DeleteResponse: The response indicating whether the lead was successfully deleted.","operationId":"Leads-delete_lead","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/prompts":{"post":{"tags":["Prompts"],"summary":"Create Prompt","description":"Create a new prompt.\n\nArgs:\n    req (CreatePromptRequest): The request object containing the prompt details.\n    user_ctx (UserContextDep): The user context object.\n    prompt_service (PromptServiceDep): The prompt service dependency.\n\nReturns:\n    The created prompt.","operationId":"Prompts-create_prompt","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePromptRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Prompt"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Prompts"],"summary":"Get Prompts","description":"Retrieves prompts for a given branch.\n\nArgs:\n    branch_id (str): The ID of the branch.\n    user_ctx (UserContextDep): The user context.\n    prompt_service (PromptServiceDep): The prompt service.\n\nReturns:\n    List[Prompt]: A list of prompts for the given branch.","operationId":"Prompts-get_prompts","security":[{"HTTPBearer":[]}],"parameters":[{"name":"branch_id","in":"query","required":true,"schema":{"type":"string","title":"Branch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Prompt"},"title":"Response Prompts-Get Prompts"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/prompts/{prompt_id}":{"post":{"tags":["Prompts"],"summary":"Update Prompt","description":"Update a prompt with the given prompt_id.\n\nArgs:\n    prompt_id (str): The ID of the prompt to update.\n    req (UpdatePromptRequest): The request object containing the updated prompt data.\n    user_ctx (UserContextDep): The user context dependency.\n    prompt_service (PromptServiceDep): The prompt service dependency.\n\nReturns:\n    Prompt: The updated prompt object.\n\nRaises:\n    HTTPException: If the prompt with the given prompt_id is not found.","operationId":"Prompts-update_prompt","security":[{"HTTPBearer":[]}],"parameters":[{"name":"prompt_id","in":"path","required":true,"schema":{"type":"string","title":"Prompt Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePromptRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Prompt"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Prompts"],"summary":"Get Prompt","description":"Retrieve a prompt by its ID.\n\nArgs:\n    prompt_id (str): The ID of the prompt to retrieve.\n    user_ctx (UserContextDep): The user context dependency.\n    prompt_service (PromptServiceDep): The prompt service dependency.\n\nReturns:\n    The prompt object if found, otherwise raises a custom exception with status code 404.","operationId":"Prompts-get_prompt","security":[{"HTTPBearer":[]}],"parameters":[{"name":"prompt_id","in":"path","required":true,"schema":{"type":"string","title":"Prompt Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Prompt"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Prompts"],"summary":"Delete Prompt","description":"Delete a prompt by its ID.\n\nArgs:\n    prompt_id (str): The ID of the prompt to delete.\n    user_ctx (UserContextDep): The user context dependency.\n    prompt_service (PromptServiceDep): The prompt service dependency.\n\nReturns:\n    DeleteResponse: The response indicating whether the prompt was successfully deleted.","operationId":"Prompts-delete_prompt","security":[{"HTTPBearer":[]}],"parameters":[{"name":"prompt_id","in":"path","required":true,"schema":{"type":"string","title":"Prompt Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/metrics/counts":{"get":{"tags":["Metrics"],"summary":"Get Metrics","description":"Retrieves metrics for a given branch.\n\nArgs:\n    start_date (datetime): The start date of the metrics period.\n    end_date (datetime): The end date of the metrics period.\n    branch_id (str): The ID of the branch.\n    user_ctx (UserContextDep): The user context.\n    metrics_service (MetricsServiceDep): The metrics service.\n\nReturns:\n    funnel_metrics (dict): A dictionary containing the funnel metrics.\n    call_metrics (dict): A dictionary containing the call metrics.","operationId":"Metrics-get_metrics","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","title":"Start Date"}},{"name":"end_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","title":"End Date"}},{"name":"branch_id","in":"query","required":true,"schema":{"type":"string","title":"Branch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/metrics/graphs":{"get":{"tags":["Metrics"],"summary":"Get Metrics Graph","description":"Retrieves metrics for a given branch.\n\nArgs:\n    start_date (datetime): The start date of the metrics period.\n    end_date (datetime): The end date of the metrics period.\n    branch_id (str): The ID of the branch.\n    user_ctx (UserContextDep): The user context.\n    metrics_service (MetricsServiceDep): The metrics service.\n\nReturns:\n    call_graph_metrics (dict): A dictionary containing the call graph metrics.","operationId":"Metrics-get_metrics_graph","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","title":"Start Date"}},{"name":"end_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","title":"End Date"}},{"name":"granularity","in":"query","required":true,"schema":{"type":"string","title":"Granularity"}},{"name":"branch_id","in":"query","required":true,"schema":{"type":"string","title":"Branch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/metrics/trends/funnel":{"get":{"tags":["Metrics"],"summary":"Get Funnel Metrics Trends","description":"Retrieves metrics trends for a given branch.\n\nArgs:\n    start_date (datetime): The start date of the metrics period.\n    end_date (datetime): The end date of the metrics period.\n    branch_id (str): The ID of the branch.\n\nReturns:\n    funnel_trends (dict): A dictionary containing the funnel trends.\n    call_trends (dict): A dictionary containing the call trends.","operationId":"Metrics-get_funnel_metrics_trends","parameters":[{"name":"start_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","title":"Start Date"}},{"name":"end_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","title":"End Date"}},{"name":"branch_id","in":"query","required":true,"schema":{"type":"string","title":"Branch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/metrics/trends/call":{"get":{"tags":["Metrics"],"summary":"Get Call Metrics Trends","description":"Retrieves metrics trends for a given branch.\n\nArgs:\n    start_date (datetime): The start date of the metrics period.\n    end_date (datetime): The end date of the metrics period.\n    branch_id (str): The ID of the branch.\n\nReturns:\n    funnel_trends (dict): A dictionary containing the funnel trends.\n    call_trends (dict): A dictionary containing the call trends.","operationId":"Metrics-get_call_metrics_trends","parameters":[{"name":"start_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","title":"Start Date"}},{"name":"end_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","title":"End Date"}},{"name":"branch_id","in":"query","required":true,"schema":{"type":"string","title":"Branch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/calls":{"post":{"tags":["Calls"],"summary":"Create Call","operationId":"Calls-create_call","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCallRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterCallResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Calls"],"summary":"Get Calls","description":"Retrieve calls for a specific branch.\n\nArgs:\n    branch_id (str): The ID of the branch.\n    user_ctx (UserContextDep): The user context.\n    call_service (CallServiceDep): The call service.\n\nReturns:\n    List[Call]: The list of calls for the branch.","operationId":"Calls-get_calls","security":[{"HTTPBearer":[]}],"parameters":[{"name":"branch_id","in":"query","required":true,"schema":{"type":"string","title":"Branch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CallResponse"},"title":"Response Calls-Get Calls"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/calls/{call_id}/report":{"get":{"tags":["Calls"],"summary":"Get Call Report","operationId":"Calls-get_call_report","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"string","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/calls/{call_id}":{"get":{"tags":["Calls"],"summary":"Get Call","operationId":"Calls-get_call","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"string","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/calls/{call_id}/download":{"get":{"tags":["Calls"],"summary":"Download","operationId":"Calls-download","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"string","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/webhooks/retell":{"post":{"tags":["Webhooks"],"summary":"Handle Retell Events","operationId":"Webhooks-handle_retell_events","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v1/webhooks/cognicue":{"post":{"tags":["Webhooks"],"summary":"Handle Cognicue Events","operationId":"Webhooks-handle_cognicue_events","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Call":{"properties":{"id":{"type":"string","title":"Id"},"object":{"type":"string","title":"Object","default":"call"},"created_at":{"type":"string","format":"date-time","title":"Created At","default":"2024-09-11T15:46:41.429618Z"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","default":"2024-09-11T15:46:41.429636Z"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"user_id":{"type":"string","title":"User Id"},"caller_name":{"type":"string","title":"Caller Name","default":""},"lead_id":{"type":"string","title":"Lead Id"},"profile_snapshot_id":{"type":"string","title":"Profile Snapshot Id"},"branch_id":{"type":"string","title":"Branch Id"},"prompt_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prompt Id"},"organization_id":{"type":"string","title":"Organization Id"},"call_timestamp":{"type":"string","format":"date-time","title":"Call Timestamp"},"agent_id":{"type":"string","title":"Agent Id"},"call_metadata":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Call Metadata"},"transcript":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transcript"},"report":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Report"},"analytics":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Analytics"},"type":{"allOf":[{"$ref":"#/components/schemas/CallType"}],"default":"appointment_call"}},"type":"object","required":["id","user_id","lead_id","profile_snapshot_id","branch_id","organization_id","agent_id"],"title":"Call"},"CallResponse":{"properties":{"call":{"$ref":"#/components/schemas/Call"},"profile_snapshot":{"$ref":"#/components/schemas/ProfileSnapshot"}},"type":"object","required":["call","profile_snapshot"],"title":"CallResponse"},"CallType":{"type":"string","enum":["appointment_call","meeting_call"],"title":"CallType"},"CreateBranchInviteRequest":{"properties":{"email":{"type":"string","title":"Email"},"name":{"type":"string","title":"Name"}},"type":"object","required":["email","name"],"title":"CreateBranchInviteRequest"},"CreateBranchRequest":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"CreateBranchRequest"},"CreateCallRequest":{"properties":{"lead_id":{"type":"string","title":"Lead Id"},"prompt_id":{"type":"string","title":"Prompt Id"},"call_type":{"$ref":"#/components/schemas/CallType"}},"type":"object","required":["lead_id","prompt_id","call_type"],"title":"CreateCallRequest"},"CreateLeadRequest":{"properties":{"branch_id":{"type":"string","title":"Branch Id"},"type":{"$ref":"#/components/schemas/LeadType"},"profile":{"type":"object","title":"Profile"}},"type":"object","required":["branch_id","type"],"title":"CreateLeadRequest"},"CreatePromptRequest":{"properties":{"name":{"type":"string","title":"Name"},"text":{"type":"string","title":"Text"},"description":{"type":"string","title":"Description"},"branch_id":{"type":"string","title":"Branch Id"},"known_to_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Known To Agent"},"meeting_status":{"anyOf":[{"$ref":"#/components/schemas/LeadStatus"},{"type":"null"}]},"prompt_type":{"allOf":[{"$ref":"#/components/schemas/PromptType"}],"default":"conversation"},"report_prompt_text":{"type":"string","title":"Report Prompt Text"}},"type":"object","required":["name","text","description","branch_id","report_prompt_text"],"title":"CreatePromptRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Invite":{"properties":{"id":{"type":"string","title":"Id"},"object":{"type":"string","title":"Object","default":"invite"},"created_at":{"type":"string","format":"date-time","title":"Created At","default":"2024-09-11T15:46:41.437001Z"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","default":"2024-09-11T15:46:41.437021Z"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"organization_id":{"type":"string","title":"Organization Id"},"branch_id":{"type":"string","title":"Branch Id"},"email":{"type":"string","title":"Email"},"status":{"allOf":[{"$ref":"#/components/schemas/InviteStatus"}],"default":"pending"},"invited_by":{"type":"string","title":"Invited By"},"role":{"$ref":"#/components/schemas/Role"},"token":{"type":"string","title":"Token"},"name":{"type":"string","title":"Name","default":""},"organization_name":{"type":"string","title":"Organization Name","default":""}},"type":"object","required":["id","organization_id","branch_id","email","invited_by","role","token"],"title":"Invite"},"InviteStatus":{"type":"string","enum":["pending","accepted","rejected","expired"],"title":"InviteStatus"},"Lead":{"properties":{"id":{"type":"string","title":"Id"},"object":{"type":"string","title":"Object","default":"lead"},"created_at":{"type":"string","format":"date-time","title":"Created At","default":"2024-09-11T15:46:41.423071Z"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","default":"2024-09-11T15:46:41.423091Z"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"branch_id":{"type":"string","title":"Branch Id"},"organization_id":{"type":"string","title":"Organization Id"},"type":{"allOf":[{"$ref":"#/components/schemas/LeadType"}],"default":"suspect"},"status":{"allOf":[{"$ref":"#/components/schemas/LeadStatus"}],"default":"Yet to Contact"},"associated_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Associated Agent"},"known_to_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Known To Agent"},"meeting_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Meeting Date"},"created_by_id":{"type":"string","title":"Created By Id"},"created_by_name":{"type":"string","title":"Created By Name"}},"type":"object","required":["id","branch_id","organization_id"],"title":"Lead"},"LeadStatus":{"type":"string","enum":["Yet to Contact","Contacted & Dropped","1st Meeting Scheduled","1st Meeting Completed","2nd Meeting Scheduled","Call Closed"],"title":"LeadStatus"},"LeadType":{"type":"string","enum":["suspect","prospect"],"title":"LeadType"},"ModifyMemberAccessRequest":{"properties":{"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["is_active"],"title":"ModifyMemberAccessRequest"},"Profile":{"properties":{"id":{"type":"string","title":"Id"},"object":{"type":"string","title":"Object","default":"profile"},"created_at":{"type":"string","format":"date-time","title":"Created At","default":"2024-09-11T15:46:41.415989Z"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","default":"2024-09-11T15:46:41.416017Z"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"branch_id":{"type":"string","title":"Branch Id"},"organization_id":{"type":"string","title":"Organization Id"},"lead_id":{"type":"string","title":"Lead Id"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"contact_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Number"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"physical_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Physical Address"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"designation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Designation"},"zipcode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Zipcode"},"age":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Age"},"occupation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Occupation"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"marital_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Marital Status"},"dependents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Dependents"},"city_tier":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City Tier"},"earning_members":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Earning Members"},"income_range":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Income Range"},"savings":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Savings"},"existing_insurance_coverage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Existing Insurance Coverage"},"desired_insurance_coverage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Desired Insurance Coverage"},"car_loan":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Car Loan"},"home_loan":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Home Loan"},"other_loan":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Other Loan"},"health_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Health Status"},"budget_conscious":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Budget Conscious"},"trust_level":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trust Level"},"decision_making_style":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Decision Making Style"},"financial_literacy":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Financial Literacy"},"likes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Likes"},"dislikes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Dislikes"},"concerns_and_priorities":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Concerns And Priorities"}},"type":"object","required":["id","branch_id","organization_id","lead_id"],"title":"Profile"},"ProfileSnapshot":{"properties":{"id":{"type":"string","title":"Id"},"object":{"type":"string","title":"Object","default":"profile_snapshot"},"created_at":{"type":"string","format":"date-time","title":"Created At","default":"2024-09-11T15:46:41.425663Z"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","default":"2024-09-11T15:46:41.425682Z"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"lead_id":{"type":"string","title":"Lead Id"},"version":{"type":"integer","title":"Version"},"data":{"type":"string","title":"Data"},"branch_id":{"type":"string","title":"Branch Id"},"organization_id":{"type":"string","title":"Organization Id"}},"type":"object","required":["id","lead_id","branch_id","organization_id"],"title":"ProfileSnapshot"},"Prompt":{"properties":{"id":{"type":"string","title":"Id"},"object":{"type":"string","title":"Object","default":"prompt"},"created_at":{"type":"string","format":"date-time","title":"Created At","default":"2024-09-11T15:46:41.432483Z"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","default":"2024-09-11T15:46:41.432502Z"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"name":{"type":"string","title":"Name"},"text":{"type":"string","title":"Text"},"created_by":{"type":"string","title":"Created By"},"created_by_name":{"type":"string","title":"Created By Name"},"organization_id":{"type":"string","title":"Organization Id"},"branch_id":{"type":"string","title":"Branch Id"},"known_to_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Known To Agent"},"meeting_status":{"anyOf":[{"$ref":"#/components/schemas/LeadStatus"},{"type":"null"}],"default":"Yet to Contact"},"prompt_type":{"allOf":[{"$ref":"#/components/schemas/PromptType"}],"default":"conversation"},"report_prompt_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Report Prompt Text"},"description":{"type":"string","title":"Description","default":""}},"type":"object","required":["id","name","text","created_by","organization_id","branch_id"],"title":"Prompt"},"PromptType":{"type":"string","enum":["conversation"],"const":"conversation","title":"PromptType"},"RegisterCallResponse":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"audio_encoding":{"type":"string","enum":["s16le","mulaw"],"title":"Audio Encoding"},"audio_websocket_protocol":{"type":"string","enum":["web","twilio"],"title":"Audio Websocket Protocol"},"call_id":{"type":"string","title":"Call Id"},"call_status":{"type":"string","enum":["registered","ongoing","ended","error"],"title":"Call Status"},"sample_rate":{"type":"integer","title":"Sample Rate"},"end_call_after_silence_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"End Call After Silence Ms"},"from_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"From Number"},"metadata":{"anyOf":[{},{"type":"null"}],"title":"Metadata"},"retell_llm_dynamic_variables":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Retell Llm Dynamic Variables"},"to_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"To Number"}},"additionalProperties":true,"type":"object","required":["agent_id","audio_encoding","audio_websocket_protocol","call_id","call_status","sample_rate"],"title":"RegisterCallResponse"},"Role":{"type":"string","enum":["admin","manager"],"title":"Role"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"Token"},"UpdateLeadRequest":{"properties":{"lead":{"anyOf":[{"$ref":"#/components/schemas/Lead"},{"type":"null"}]},"profile":{"anyOf":[{"$ref":"#/components/schemas/Profile"},{"type":"null"}]}},"type":"object","title":"UpdateLeadRequest"},"UpdatePromptRequest":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"known_to_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Known To Agent"},"meeting_status":{"anyOf":[{"$ref":"#/components/schemas/LeadStatus"},{"type":"null"}]},"report_prompt_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Report Prompt Text"}},"type":"object","title":"UpdatePromptRequest"},"User":{"properties":{"id":{"type":"string","title":"Id"},"object":{"type":"string","title":"Object","default":"user"},"created_at":{"type":"string","format":"date-time","title":"Created At","default":"2024-09-11T15:46:41.409953Z"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","default":"2024-09-11T15:46:41.409974Z"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"email":{"type":"string","title":"Email"},"hashed_password":{"type":"string","title":"Hashed Password"},"full_name":{"type":"string","title":"Full Name"},"designation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Designation"},"organization_id":{"type":"string","title":"Organization Id"},"current_branch_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Branch Id"},"role":{"$ref":"#/components/schemas/Role"},"is_active":{"type":"boolean","title":"Is Active","default":true}},"type":"object","required":["id","email","hashed_password","full_name","organization_id","role"],"title":"User"},"UserLoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","format":"password","title":"Password","writeOnly":true}},"type":"object","required":["email","password"],"title":"UserLoginRequest"},"UserRegisterRequest":{"properties":{"full_name":{"type":"string","title":"Full Name"},"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","minLength":8,"format":"password","title":"Password","writeOnly":true},"organization_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Organization Name"},"invite_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Invite Token"}},"type":"object","required":["full_name","email","password"],"title":"UserRegisterRequest"},"UserResponse":{"properties":{"id":{"type":"string","title":"Id"},"object":{"type":"string","title":"Object"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"email":{"type":"string","title":"Email"},"full_name":{"type":"string","title":"Full Name"},"designation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Designation"},"organization_id":{"type":"string","title":"Organization Id"},"current_branch_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Branch Id"},"role":{"$ref":"#/components/schemas/Role"},"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["id","object","created_at","updated_at","deleted_at","email","full_name","designation","organization_id","current_branch_id","role","is_active"],"title":"UserResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}